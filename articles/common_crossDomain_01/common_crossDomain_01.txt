## 跨域问题与解决方案
跨域问题一般在前后端分离的模式下比较常见，因为前端页面和后端服务往往部署在不同的域名下，在此过程中一个重要的问题就是跨域资源访问的问题，通常由于同域安全策略浏览器会拦截JavaScript脚本的跨域网络请求，这也就造成了系统上线时前端无法访问后端资源这一问题。

----

### 跨域问题原因

产生跨域问题的根本原因就是浏览器同源策略。

#### 浏览器同源策略
1995年，同源政策由Netscape公司引入浏览器。目前，所有浏览器都实行这个政策。**所谓同源是指:协议、域名、端口相同。**  
来看一些例子，这里引用了阮一峰老师的例子：
举例来说，http://www.example.com/dir/page.html 这个网址，协议是 http://，域名是 www.example.com，端口是 80（默认端口可以省略），它的同源情况如下。
- http://www.example.com/dir2/other.html：同源
- http://example.com/dir/other.html：不同源（域名不同）
- http://v2.www.example.com/dir/other.html：不同源（域名不同）
- http://www.example.com:81/dir/other.html：不同源（端口不同）
- https://www.example.com/dir/page.html：不同源（协议不同）

同源政策的目的，是为了保证用户信息的安全，防止恶意的网站窃取数据。**同源策略是浏览器的行为**，是为了保护本地数据不被JavaScript代码获取回来的数据污染，因此拦截的是客户端发出的请求回来的数据接收，即请求发送了，服务器响应了，但是无法被浏览器接收。  

当网站上线后，网页上很多资源都是要通过发送AJAX请求向服务器索要资源，但是在前后端分离的系统架构中，前端页面和后端服务往往不会部署在同一域名之下。比如用户通过浏览器访问 www.test001.com 这一地址，来到了系统首页，此时浏览器从网站服务器中只取回了基本的HTML页面以及CSS样式表文件和JavaScript脚本。系统首页的其他内容，比如轮播图、文章列表等，需要利用JavaScript脚本程序，向地址为  www.test002.com 的后端应用服务器发送请求来获取信息。此时由于浏览器的同源策略，该请求会被浏览器所拦截，这就造成了前后端数据不通这一结果。

![GN15Yn.png](https://s1.ax1x.com/2020/04/03/GN15Yn.png)

----

### 解决方案
#### 前端解决方案 
因为由于浏览器的同源策略，JavaScript脚本程序只能向同一域名下的服务器发送网络请求，那么可以通过网页服务器转发这一网络请求到相应的后端服务器，获取相关数据，然后网页服务器再把这一数据返回给浏览器。这一过程称之为反向代理。  

假设用户通过地址www.test001.com访问到了系统首页，该系统首页中所加载的JavaScript脚步程序本应该要发送AJAX请求到www.test002.com/api/article…这一地址，来获取首页文章列表信息。此时应该改成向www.test001.com/api/article…这一与之同源的地址发送数据请求。该系统的网页服务器会收到此请求，然后代替JavaScript脚本程序向www.test002.com/api/article…这一地址请求数据，获取数据后将之返回给浏览器。此时JavaScript脚本程序就通过网页服务器这一桥梁成功获取到了后端应用服务器上的数据。

![GN374A.png](https://s1.ax1x.com/2020/04/03/GN374A.png)



----
## 结束语
以上就是我关于MVC和MVVM的一些理解，如果本文中有说的不正确的地方，欢迎大佬鞭策!
### 参考资料：
[阮一峰-MVC，MVP 和 MVVM 的图示](http://www.ruanyifeng.com/blog/2015/02/mvcmvp_mvvm.html)  
[思否-MVVM框架理解及其原理实现](https://segmentfault.com/a/1190000015895017)    
[MVVM模式理解](https://www.cnblogs.com/goloving/p/8520030.html)  
[简书-MVVM响应式系统的基本实现原理](https://www.jianshu.com/p/9fc69a38da50)  
[知乎-Vue 模板编译原理](https://zhuanlan.zhihu.com/p/85105001)