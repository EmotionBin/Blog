# 编码

编码对我们来说其实并不陌生，接触计算机就要一直和编码打交道，`UTF-8` 就是比较常见的编码，当然编码的方式有很多，这里只是举例说明。那么为什么需要编码呢，因为计算机是二进制的，我们在电脑上存储的文件大多数都是以二进制形式存储的，在计算机眼里只有 0 和 1，如果不经过编码，计算机可能无法识别一些内容；又比如我们熟悉的 `HTTP` 协议，`HTTP` 协议可以传输数据，一般使用的是 `UTF-8` 编码，这里编码是为了让数据传输的过程中节省数据存储空间，可以节省带宽，加快传输速度等，这就是为什么需要编码的原因，本文就来一起讨论一些常见的编码  

----

**草稿部分 开始**
1. URL编码 encodeURI、encodeURIComponent、decodeURI、decodeURIComponent
2. Unicode编码
3. UTF-8编码
4. ASCII编码
5. base64编码
6. 视频编码 rtsp、rtmp协议
7. ISO-8859-1
8. GB2312(gbk编码)
9. ajax编码(form-data、x-www-urlencoded)

参考:
1.http://www.ruanyifeng.com/blog/2010/02/url_encoding.html
2.http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html

**草稿部分 结束**

## 编码原理

因为计算机眼里只有 0 和 1，这就意味这必须要编码才能显示更多的内容，编码到底是如何进行的，下面就来一起讨论  

----

### ASCII 码 

计算机内部，所有信息最终都是一个二进制值，每一个二进制位(bit)有 0 和 1 两种状态，因此八个二进制位就可以组合出 256 种状态，这被称为一个字节(byte)。所以一个字节可以表示 256 中不同的状态，每一个状态对应一个符号，就是 256 个符号，从 `00000000` 到 `11111111`  

ASCII 码是一直沿用至今的一套编码表，规定了128个字符的编码，比如空格 `SPACE` 是 32(二进制`00100000`)，大写的字母 A 是 65(二进制01000001)。这 128 个符号，只占用了一个字节的后面 7 位，最前面的一位统一规定为 0，即可以表示为 `0xxxxxxx`(x 代表 0 或 1)  

----

### 非 ASCII 编码

英语用 128 个符号编码就够了，但是用来表示其他语言，128 个符号是不够的，比如一些欧洲国家的语言会有比较多的符号。所以就决定利用 ASCII 码中字节的第一个 0 来表示更多的符号，这样一来，这些欧洲国家使用的编码体系，可以表示最多 256 个符号  

这样看似解决了问题，这里又出现了新的问题，不同的国家有不同的字母，因此，哪怕它们都使用 256 个符号的编码方式，代表的字母却不一样，比如，130 在法语编码中代表了 `é`，在希伯来语编码中却代表了字母 `Gimel` (`ג`)，在俄语编码中又会代表另一个符号。但是不管怎样，所有这些编码方式中，0--127 表示的符号是一样的，不一样的只是 128--255 的这一段  

对于亚洲国家的符号就更多了，汉字就多达10万左右，一个字节只能表示 256 种符号，肯定是不够的，就必须使用多个字节表达一个符号。比如，简体中文常见的编码方式是 GB2312，使用两个字节表示一个汉字，所以理论上最多可以表示 256 x 256 = 65536 个符号  

----

## URL 编码

一般来说，URL 只能使用英文字母、阿拉伯数字和某些标点符号，不能使用其他文字和符号，因为网络标准 `RFC 1738` 做了硬性规定，这意味着，如果 URL 中有汉字，就必须编码后使用，但是麻烦的是，`RFC 1738` 没有规定具体的编码方法，而是交给应用程序（浏览器）自己决定，这导致 URL 编码成为了一个混乱的领域  

下面直接引用阮一峰老师经过辛苦测试得出的结论，致敬阮一峰老师  

- 情况1：网址路径中包含汉字  

如 `http://zh.wikipedia.org/wiki/春节`，这个网址中包含了中文字符，必须要经过浏览器编码，编码后“春节”变成了“%E6%98%A5%E8%8A%82”  

**结论：网址路径的编码，用的是utf-8编码**  

- 情况2：查询字符串包含汉字  

如 `http://www.baidu.com/s?wd=春节`，注意和情况1区分，“春节”这两个字此时属于查询字符串，不属于网址路径，编码后“春节”变成了“%E6%98%A5%E8%8A%82”  

**结论：查询字符串的编码，用的是操作系统的默认编码**

- 情况3：Get 方法生成的 URL 包含汉字

如 `http://www.baidu.com/s?wd=春节`、`http://www.google.cn/search?q=春节` 注意和情况2区分，这里指的是在已打开的网页上，直接用 Get 或 Post 方法发出 HTTP 请求  

**结论：GET 和 POST 方法的编码，用的是网页的编码**(在 html 文件的 head 标签中 `<meta charset="UTF-8">` 则说明该网页使用 `utf-8` 编码，可自行修改)

以上结论是阮一峰老师在 2010 年得出的结论，现在的网页一般情况下都是使用的 utf-8 进行编码，提高容错率，下面会介绍一些手动编码的 JS 函数  

----

### encodeURI() 与 decodeURI()

`encodeURI()` 是 JS 中对 URL 进行编码的函数，它着眼于对整个URL进行编码，所以对部分有特殊含义的符号不进行编码(; / ? : @ & = + $ , #等)，编码后，输出 utf-8 形式，并且在每个字节前加上%  

```javascript
encodeURI('http://www.baidu.com/s?wd=春节');
// "http://www.baidu.com/s?wd=%E6%98%A5%E8%8A%82"
```

`decodeURI()` 是 JS 中对 URL 进行解码的函数，与 `encodeURI()` 对应  

```javascript
decodeURI('http://www.baidu.com/s?wd=%E6%98%A5%E8%8A%82');
// "http://www.baidu.com/s?wd=春节"
```

### encodeURIComponent() 与 decodeURIComponent()

`encodeURIComponent()` 也是 JS 中对 URL 进行编码的函数，与 `encodeURI()` 的区别是，它用于对URL的组成部分进行个别编码，因为部分 `encodeURI()` 不进行编码的符号在 `encodeURIComponent()` 中都会进行编码  

```javascript
encodeURIComponent('http://www.baidu.com/s?wd=春节');
// "http%3A%2F%2Fwww.baidu.com%2Fs%3Fwd%3D%E6%98%A5%E8%8A%82"
```

`decodeURIComponent()` 也是 JS 中对 URL 进行解码的函数，与 `encodeURIComponent()` 对应  

```javascript
decodeURIComponent('http%3A%2F%2Fwww.baidu.com%2Fs%3Fwd%3D%E6%98%A5%E8%8A%82');
// "http://www.baidu.com/s?wd=春节"
```

----

### ajax 编码







